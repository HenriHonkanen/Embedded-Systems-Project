   1               		.file	"motor.c"
   2               	__SREG__ = 0x3f
   3               	__SP_H__ = 0x3e
   4               	__SP_L__ = 0x3d
   5               	__CCP__ = 0x34
   6               	__tmp_reg__ = 0
   7               	__zero_reg__ = 1
  10               		.text
  11               	.Ltext0:
  75               	.global	SetMotorSpeed
  77               	SetMotorSpeed:
  78               		.stabd	46,0,0
   1:motor.c       **** #include "motor.h"
   2:motor.c       **** 
   3:motor.c       **** void InitMotor(void) {
   4:motor.c       **** 	RESET_TIMER(4);
   5:motor.c       **** 	SETUP_MOTOR_IO();
   6:motor.c       **** 	SETUP_MOTOR_CLOCKWISE();
   7:motor.c       **** 	SETUP_MODE14_FAST_PWM(4);
   8:motor.c       **** 	ENABLE_COMPARE_OUTPUT_MODE(4);
   9:motor.c       **** 	SetMotorSpeed(0);
  10:motor.c       **** 	SETUP_TOP_VALUE(4, MOTOR_DUTY_CYCLE);
  11:motor.c       **** 
  12:motor.c       **** 	START_MOTOR_TIMER;
  13:motor.c       **** }
  14:motor.c       **** 
  15:motor.c       **** void SetMotorSpeed(int percentage) {
  80               	.LM0:
  81               	.LFBB1:
  82 0000 AF92      		push r10
  83 0002 BF92      		push r11
  84 0004 CF92      		push r12
  85 0006 DF92      		push r13
  86 0008 EF92      		push r14
  87 000a FF92      		push r15
  88 000c 0F93      		push r16
  89 000e 1F93      		push r17
  90               	/* prologue: function */
  91               	/* frame size = 0 */
  92               	/* stack size = 8 */
  93               	.L__stack_usage = 8
  16:motor.c       **** 	int value = map( percentage, MIN_RELATIVE_SPEED, MAX_RELATIVE_SPEED, MIN_POWER, MAX_POWER );
  95               	.LM1:
  96 0010 00D0      		rcall .
  97 0012 0F92      		push __tmp_reg__
  98 0014 9C01      		movw r18,r24
  99 0016 B901      		movw r22,r18
 100 0018 8827      		clr r24
 101 001a 77FD      		sbrc r23,7
 102 001c 8095      		com r24
 103 001e 982F      		mov r25,r24
 104 0020 2AE0      		ldi r18,lo8(266)
 105 0022 31E0      		ldi r19,hi8(266)
 106 0024 40E0      		ldi r20,hlo8(266)
 107 0026 50E0      		ldi r21,hhi8(266)
 108 0028 EDB7      		in r30,__SP_L__
 109 002a FEB7      		in r31,__SP_H__
 110 002c 2183      		std Z+1,r18
 111 002e 3283      		std Z+2,r19
 112 0030 4383      		std Z+3,r20
 113 0032 5483      		std Z+4,r21
 114 0034 20E0      		ldi r18,lo8(0)
 115 0036 30E0      		ldi r19,hi8(0)
 116 0038 A901      		movw r20,r18
 117 003a E4E6      		ldi r30,lo8(100)
 118 003c EE2E      		mov r14,r30
 119 003e F12C      		mov r15,__zero_reg__
 120 0040 012D      		mov r16,__zero_reg__
 121 0042 112D      		mov r17,__zero_reg__
 122 0044 AA24      		clr r10
 123 0046 BB24      		clr r11
 124 0048 6501      		movw r12,r10
 125 004a 0E94 0000 		call map
  17:motor.c       ****    	SET_MOTOR_SPEED(value);
 127               	.LM2:
 128 004e 7093 A900 		sts 168+1,r23
 129 0052 6093 A800 		sts 168,r22
 130 0056 0F90      		pop __tmp_reg__
 131 0058 0F90      		pop __tmp_reg__
 132 005a 0F90      		pop __tmp_reg__
 133 005c 0F90      		pop __tmp_reg__
 134               	/* epilogue start */
  18:motor.c       **** }
 136               	.LM3:
 137 005e 1F91      		pop r17
 138 0060 0F91      		pop r16
 139 0062 FF90      		pop r15
 140 0064 EF90      		pop r14
 141 0066 DF90      		pop r13
 142 0068 CF90      		pop r12
 143 006a BF90      		pop r11
 144 006c AF90      		pop r10
 145 006e 0895      		ret
 147               	.Lscope1:
 149               		.stabd	78,0,0
 151               	.global	InitMotor
 153               	InitMotor:
 154               		.stabd	46,0,0
   3:motor.c       **** void InitMotor(void) {
 156               	.LM4:
 157               	.LFBB2:
 158 0070 CF93      		push r28
 159 0072 DF93      		push r29
 160               	/* prologue: function */
 161               	/* frame size = 0 */
 162               	/* stack size = 2 */
 163               	.L__stack_usage = 2
   4:motor.c       **** 	RESET_TIMER(4);
 165               	.LM5:
 166 0074 E0EA      		ldi r30,lo8(160)
 167 0076 F0E0      		ldi r31,hi8(160)
 168 0078 1082      		st Z,__zero_reg__
 169 007a C1EA      		ldi r28,lo8(161)
 170 007c D0E0      		ldi r29,hi8(161)
 171 007e 1882      		st Y,__zero_reg__
 172 0080 1092 A500 		sts 164+1,__zero_reg__
 173 0084 1092 A400 		sts 164,__zero_reg__
   5:motor.c       **** 	SETUP_MOTOR_IO();
 175               	.LM6:
 176 0088 A7E0      		ldi r26,lo8(263)
 177 008a B1E0      		ldi r27,hi8(263)
 178 008c 8C91      		ld r24,X
 179 008e 8160      		ori r24,lo8(1)
 180 0090 8C93      		st X,r24
 181 0092 8C91      		ld r24,X
 182 0094 8260      		ori r24,lo8(2)
 183 0096 8C93      		st X,r24
 184 0098 A1E0      		ldi r26,lo8(257)
 185 009a B1E0      		ldi r27,hi8(257)
 186 009c 8C91      		ld r24,X
 187 009e 8860      		ori r24,lo8(8)
 188 00a0 8C93      		st X,r24
   6:motor.c       **** 	SETUP_MOTOR_CLOCKWISE();
 190               	.LM7:
 191 00a2 A8E0      		ldi r26,lo8(264)
 192 00a4 B1E0      		ldi r27,hi8(264)
 193 00a6 8C91      		ld r24,X
 194 00a8 8160      		ori r24,lo8(1)
 195 00aa 8C93      		st X,r24
   7:motor.c       **** 	SETUP_MODE14_FAST_PWM(4);
 197               	.LM8:
 198 00ac 8081      		ld r24,Z
 199 00ae 8E7F      		andi r24,lo8(-2)
 200 00b0 8083      		st Z,r24
 201 00b2 8081      		ld r24,Z
 202 00b4 8260      		ori r24,lo8(2)
 203 00b6 8083      		st Z,r24
 204 00b8 8881      		ld r24,Y
 205 00ba 8860      		ori r24,lo8(8)
 206 00bc 8883      		st Y,r24
 207 00be 8881      		ld r24,Y
 208 00c0 8061      		ori r24,lo8(16)
 209 00c2 8883      		st Y,r24
   8:motor.c       **** 	ENABLE_COMPARE_OUTPUT_MODE(4);
 211               	.LM9:
 212 00c4 8081      		ld r24,Z
 213 00c6 8068      		ori r24,lo8(-128)
 214 00c8 8083      		st Z,r24
   9:motor.c       **** 	SetMotorSpeed(0);
 216               	.LM10:
 217 00ca 80E0      		ldi r24,lo8(0)
 218 00cc 90E0      		ldi r25,hi8(0)
 219 00ce 0E94 0000 		call SetMotorSpeed
  10:motor.c       **** 	SETUP_TOP_VALUE(4, MOTOR_DUTY_CYCLE);
 221               	.LM11:
 222 00d2 80E2      		ldi r24,lo8(800)
 223 00d4 93E0      		ldi r25,hi8(800)
 224 00d6 9093 A700 		sts 166+1,r25
 225 00da 8093 A600 		sts 166,r24
  12:motor.c       **** 	START_MOTOR_TIMER;
 227               	.LM12:
 228 00de 8881      		ld r24,Y
 229 00e0 8160      		ori r24,lo8(1)
 230 00e2 8883      		st Y,r24
 231               	/* epilogue start */
  13:motor.c       **** }
 233               	.LM13:
 234 00e4 DF91      		pop r29
 235 00e6 CF91      		pop r28
 236 00e8 0895      		ret
 238               	.Lscope2:
 240               		.stabd	78,0,0
 246               	.Letext0:
DEFINED SYMBOLS
                            *ABS*:0000000000000000 motor.c
     /tmp/cc3Ouo0j.s:2      *ABS*:000000000000003f __SREG__
     /tmp/cc3Ouo0j.s:3      *ABS*:000000000000003e __SP_H__
     /tmp/cc3Ouo0j.s:4      *ABS*:000000000000003d __SP_L__
     /tmp/cc3Ouo0j.s:5      *ABS*:0000000000000034 __CCP__
     /tmp/cc3Ouo0j.s:6      *ABS*:0000000000000000 __tmp_reg__
     /tmp/cc3Ouo0j.s:7      *ABS*:0000000000000001 __zero_reg__
     /tmp/cc3Ouo0j.s:77     .text:0000000000000000 SetMotorSpeed
     /tmp/cc3Ouo0j.s:153    .text:0000000000000070 InitMotor

UNDEFINED SYMBOLS
map
